<!-- https://n-aa76z4yugu63b6y3c46thywmebbm5wktyerpwna-0lu-script.googleusercontent.com,  https://n-pbrkav7csa4sz643b6ia4osqprbm5wktyerpwna-0lu-script.googleusercontent.com--> 


<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <style>
      
      h2 {
        
      }
      .center {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 300px;
      }
      .nothin {
        margin: 0;
        background: yellow;
        position: absolute;
        top: 50%;
        left: 50%;
      }
    </style>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    
    
    <meta name="google-signin-scope" content="https://www.googleapis.com/auth/plus.login" />
    <meta name="google-signin-client_id" content="737396383801-62om9lr8s11gcb2knkc26k2olimqh4ia.apps.googleusercontent.com">
    <script>
    
      function onSignIn(googleUser) {
        
        
        // Useful data for your client-side scripts:
        try {
          var profile = googleUser.getBasicProfile();
        } catch(e) {
          console.log("Error Found: " + e);
        }
        console.log("Host: " + googleUser.getHostedDomain()); // Don't send this directly to your server!
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());
        
        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        // console.log("ID Token: " + id_token);
        
        if(googleUser.getHostedDomain() != "vivintsolar.com") {
          alert("Please Loggin with a vivintsolar.com account");
          signOut();
          return;
        }
        
        //window.location.href = "https://script.google.com/a/vivintsolar.com/macros/s/AKfycbzvkWlra7x7zhuISqScp72ype60yWFbr5OaKAK7YEg?page=index";
      }
    
      function signOut() {
        window.location.href="http://www.google.com";
        return;
        
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut();
        console.log('User signed out.');
      }
      
      function onSignInFailure() {
        console.log('Failed to Sign In.');
      }
    </script>    
    
  </head>
  <body>
    <div class="center">
      <h2>Vivint Solar Ally</h2>
      <button onclick="signOut()">Sign Out</button>
      <div class="g-signin2" data-onsuccess="onSignIn" data-onfailure="onSignInFailure" data-theme="dark"></div> 
    </div>
  </body>
</html>

